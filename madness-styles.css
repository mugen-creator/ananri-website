/* 狂気度レベル管理CSS */
/* JavaScriptによる直接的なstyle変更を避け、クラスで管理 */

/* マウス静止時 */
.mouse-idle {
    background-color: #0a0000 !important;
    transition: background-color 0.5s;
}

/* 脱出警告 */
.escape-warning {
    filter: invert(1);
    transition: filter 0.2s;
}

.escape-warning-text {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3rem;
    color: #8B0000;
    z-index: 10000;
    pointer-events: none;
    animation: warning-pulse 0.5s;
}

@keyframes warning-pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.2); }
}

/* 狂気度レベル1 (10秒後) */
.madness-level-1 {
    animation: subtle-pulse 8s ease-in-out infinite;
}

@keyframes subtle-pulse {
    0%, 100% { 
        filter: brightness(1) contrast(1);
    }
    50% { 
        filter: brightness(0.95) contrast(1.05);
    }
}

/* 狂気度レベル2 (20秒後) */
.madness-level-2 {
    animation: medium-distort 6s ease-in-out infinite;
}

.madness-level-2 img,
.madness-level-2 .card-inner {
    animation: slight-rotation 10s ease-in-out infinite;
}

@keyframes medium-distort {
    0%, 100% { 
        filter: brightness(1) contrast(1) hue-rotate(0deg);
    }
    33% { 
        filter: brightness(0.9) contrast(1.1) hue-rotate(5deg);
    }
    66% { 
        filter: brightness(1.05) contrast(0.95) hue-rotate(-5deg);
    }
}

@keyframes slight-rotation {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(1deg); }
    50% { transform: rotate(-1deg); }
    75% { transform: rotate(0.5deg); }
}

/* 狂気度レベル3 (30秒後) */
.madness-level-3 {
    animation: heavy-distort 5s ease-in-out infinite;
}

.madness-level-3 .section-title {
    animation: title-glitch 3s infinite;
}

@keyframes heavy-distort {
    0%, 100% { 
        filter: brightness(1) contrast(1) saturate(1);
    }
    25% { 
        filter: brightness(0.85) contrast(1.2) saturate(0.8);
    }
    50% { 
        filter: brightness(1.1) contrast(0.9) saturate(1.2);
    }
    75% { 
        filter: brightness(0.95) contrast(1.05) saturate(0.9);
    }
}

@keyframes title-glitch {
    0%, 100% { 
        text-shadow: 0 0 5px rgba(139, 0, 0, 0.5);
    }
    50% { 
        text-shadow: 
            2px 2px 0 rgba(255, 0, 0, 0.5),
            -2px -2px 0 rgba(0, 255, 0, 0.5);
    }
}

/* 深いスクロール時 */
.deep-madness {
    position: relative;
}

.deep-madness::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, transparent 30%, rgba(139, 0, 0, 0.1) 100%);
    pointer-events: none;
    z-index: 1;
    animation: vignette-pulse 4s ease-in-out infinite;
}

@keyframes vignette-pulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
}

/* 全体的な狂気（使用しない - 予備） */
.total-madness {
    animation: complete-madness 2s ease-in-out infinite;
}

@keyframes complete-madness {
    0%, 100% { 
        transform: rotate(0deg) scale(1);
        filter: hue-rotate(0deg);
    }
    25% { 
        transform: rotate(0.5deg) scale(1.01);
        filter: hue-rotate(90deg);
    }
    50% { 
        transform: rotate(-0.5deg) scale(0.99);
        filter: hue-rotate(180deg);
    }
    75% { 
        transform: rotate(0.3deg) scale(1.005);
        filter: hue-rotate(270deg);
    }
}

/* リセット用クラス */
.reset-madness * {
    animation: none !important;
    filter: none !important;
    transform: none !important;
    transition: all 0.5s ease-out;
}

/* モバイルでは狂気度エフェクトを軽減 */
@media (max-width: 767px) {
    .madness-level-1,
    .madness-level-2,
    .madness-level-3 {
        animation: none;
    }
    
    .deep-madness::after {
        display: none;
    }
    
    .madness-level-2 img,
    .madness-level-2 .card-inner,
    .madness-level-3 .section-title {
        animation: none;
    }
}

/* パフォーマンス最適化: アニメーション削減モード */
@media (prefers-reduced-motion: reduce) {
    .madness-level-1,
    .madness-level-2,
    .madness-level-3,
    .deep-madness::after {
        animation: none !important;
    }
}